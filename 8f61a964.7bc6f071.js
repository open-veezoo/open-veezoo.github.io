(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{109:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var b=i.a.createContext({}),c=function(e){var t=i.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return i.a.createElement(b.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},m=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,b=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=a,d=u["".concat(l,".").concat(m)]||u[m]||p[m]||r;return n?i.a.createElement(d,o(o({ref:t},b),{},{components:n})):i.a.createElement(d,o({ref:t},b))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var b=2;b<r;b++)l[b]=n[b];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},83:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return c}));var a=n(2),i=n(6),r=(n(0),n(109)),l={id:"kb-layer",title:"Knowledge Base Layer",sidebar_label:"Knowledge Base Layer",slug:"/kb-layer"},o={unversionedId:"getting-started/kb-layer",id:"getting-started/kb-layer",isDocsHomePage:!1,title:"Knowledge Base Layer",description:"The knowledge-base layer (kb) is where the magic happens. The idea behind the kb layer is to model your data semantically, i.e. as if you would be explaining to a person what your database is really about.",source:"@site/docs/getting-started/kb-layer.md",slug:"/kb-layer",permalink:"/docs/kb-layer",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/getting-started/kb-layer.md",version:"current",sidebar_label:"Knowledge Base Layer",sidebar:"docs",previous:{title:"Database Layer",permalink:"/docs/db-layer"},next:{title:"Get Veezoo to Understand Your Questions",permalink:"/docs/recipes/understand-questions"}},s=[{value:"Classes and Entities",id:"classes-and-entities",children:[]},{value:"Relationships",id:"relationships",children:[]},{value:"Attributes",id:"attributes",children:[{value:"Numeric attributes: double / integer",id:"numeric-attributes-double--integer",children:[]},{value:"Date attributes",id:"date-attributes",children:[]},{value:"Boolean attributes",id:"boolean-attributes",children:[]},{value:"Class attributes",id:"class-attributes",children:[]},{value:"String attributes",id:"string-attributes",children:[]}]}],b={rightToc:s};function c(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"knowledge-base")," layer (",Object(r.b)("inlineCode",{parentName:"p"},"kb"),") is where the magic happens. The idea behind the ",Object(r.b)("inlineCode",{parentName:"p"},"kb")," layer is to model your data semantically, i.e. as if you would be explaining to a person what your database is really about."),Object(r.b)("p",null,"The idea sounds familiar? You have probably heard about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://en.wikipedia.org/wiki/Entity%E2%80%93relationship_model"}),"Entity-Relationship modelling"),". Well, that's pretty much what we are doing here.\nInstead of talking about views/tables/columns, which is just the physical representation of information, we will model it closer to the business domain."),Object(r.b)("p",null,"For this modelling, we have to introduce the vocabulary:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Classes (in ER-modelling they are known as Entity Types)"),Object(r.b)("li",{parentName:"ul"},"Entities"),Object(r.b)("li",{parentName:"ul"},"Relationships"),Object(r.b)("li",{parentName:"ul"},"Attributes")),Object(r.b)("p",null,"Let's see in detail what each of these things actually mean."),Object(r.b)("h2",{id:"classes-and-entities"},"Classes and Entities"),Object(r.b)("p",null,"If you come from a software background, you may be familiar with the idea of a class as defined in object-oriented programming. In some sense, we are making your data more object-oriented.\nSo, a class can be defined as a category of things. The best way to understand it is to go over some examples."),Object(r.b)("p",null,"A class could be something like:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Customer")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Country")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Order")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Movie"))),Object(r.b)("p",null,'Now, each of these classes may have instantiations of it. In programming, we call these "objects". In VKL, we call them ',Object(r.b)("inlineCode",{parentName:"p"},"entities"),".\nSo following our example, we may have entities like:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"entity ",Object(r.b)("inlineCode",{parentName:"li"},"Till_Haug")," of class ",Object(r.b)("inlineCode",{parentName:"li"},"Customer")," "),Object(r.b)("li",{parentName:"ul"},"entity ",Object(r.b)("inlineCode",{parentName:"li"},"Brazil")," of class ",Object(r.b)("inlineCode",{parentName:"li"},"Country")),Object(r.b)("li",{parentName:"ul"},"entity ",Object(r.b)("inlineCode",{parentName:"li"},"Batman")," of class ",Object(r.b)("inlineCode",{parentName:"li"},"Movie"))),Object(r.b)("p",null,"But what about ",Object(r.b)("inlineCode",{parentName:"p"},"Order"),"? For classes like ",Object(r.b)("inlineCode",{parentName:"p"},"Order"),", ",Object(r.b)("inlineCode",{parentName:"p"},"Transaction")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Event"),", it makes sense usually to model it as a class without entities. Prefer to use classes with entities when there is a way to refer to an individual of this class in a question."),Object(r.b)("p",null,"Here is an example of a class in VKL:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'import: [\n    db.postgres.movie_db.public.ORDERS\n]\n\nkb {\n    class Customer {\n        name.en: "Customer"     \n        synonym.en: "Client"\n        extends: onto.Customer\n        \n        sql: "${ORDERS.customer_id}"\n        name_sql.en:\n          "${ORDERS.customer_firstname} || \' \' || ${ORDERS.customer_lastname}"\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"To learn more about how classes and entities are defined in VKL here:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/reference/kb-layer/class/class"}),"What is a class?")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/reference/kb-layer/entity/entity"}),"What is an entity?"))),Object(r.b)("h2",{id:"relationships"},"Relationships"),Object(r.b)("p",null,"A relationship in VKL describes how classes relate to each other."),Object(r.b)("p",null,"Example:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Till_Haug")," ",Object(r.b)("em",{parentName:"li"},"works at")," ",Object(r.b)("inlineCode",{parentName:"li"},"Veezoo_AG")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"JP_Monteiro")," ",Object(r.b)("em",{parentName:"li"},"is from the segment")," ",Object(r.b)("inlineCode",{parentName:"li"},"Consumer")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Rio_de_Janeiro")," ",Object(r.b)("em",{parentName:"li"},"is located in")," ",Object(r.b)("inlineCode",{parentName:"li"},"Brazil"))),Object(r.b)("p",null,"In other words, we have the following relationships:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"works_at")," is a relationship that goes from ",Object(r.b)("inlineCode",{parentName:"li"},"Employee")," to ",Object(r.b)("inlineCode",{parentName:"li"},"Company")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"from_segment")," is a relationship that goes from ",Object(r.b)("inlineCode",{parentName:"li"},"Customer")," to the class ",Object(r.b)("inlineCode",{parentName:"li"},"Segment")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"located_in")," is a relationship that goes from ",Object(r.b)("inlineCode",{parentName:"li"},"City")," to the class ",Object(r.b)("inlineCode",{parentName:"li"},"Country"))),Object(r.b)("p",null,"Here is an example of a ",Object(r.b)("inlineCode",{parentName:"p"},"relationship")," in VKL:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'import: [\n    db.postgres.movie_db.public.ORDER\n]\n\nkb {\n\n    class Order {\n        name.en: "Order"\n        sql: "${ORDER.id}"\n\n        ...\n\n        relationship from_Customer {\n            to: kb.Customer\n\n            sql: "${ORDER.customer_id}"\n        }\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"Learn about how relationships are defined in VKL here:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"/docs/reference/kb-layer/relationship/relationship"}),"What is a relationship?"))),Object(r.b)("h2",{id:"attributes"},"Attributes"),Object(r.b)("p",null,"Attributes are properties of a class and they can be of the following types: ",Object(r.b)("inlineCode",{parentName:"p"},"double"),", ",Object(r.b)("inlineCode",{parentName:"p"},"integer"),", ",Object(r.b)("inlineCode",{parentName:"p"},"date"),", ",Object(r.b)("inlineCode",{parentName:"p"},"boolean"),", ",Object(r.b)("inlineCode",{parentName:"p"},"string")," and ",Object(r.b)("inlineCode",{parentName:"p"},"class")," as well."),Object(r.b)("h3",{id:"numeric-attributes-double--integer"},"Numeric attributes: double / integer"),Object(r.b)("p",null,"Examples:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'kb {\n\n    class Country {\n\n        ...\n\n        /** e.g. Brazil has a population of 209,500,000 inhabitants. */\n        integer Population {\n            name.en: "Population"\n            \n            sql: "${COUNTRY.population}"\n        }\n\n        /** e.g. USA has a GDP of 21.43 trillion USD. */\n        double Gross_Domestic_Product {\n            name.en: "Gross Domestic Product"\n            synonym.en: "GDP"\n            unit: onto.Currency.USD\n            \n            sql: "${COUNTRY.gdp_in_usd}"\n        }\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"Learn more about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/kb-layer/attribute/double-integer"}),"numeric attributes here"),"."),Object(r.b)("h3",{id:"date-attributes"},"Date attributes"),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'kb {\n\n    class Customer {\n\n        ...\n\n        /** e.g. JP was born on 30th of March 1993. */\n        date Birthdate {\n            name.en: "Birthdate"\n            extends: onto.Birthdate\n            datetime_format: DayFormat\n            \n            sql: "${CUSTOMER.birthdate}"\n        }\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"Learn more about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/kb-layer/attribute/date"}),"date attributes here"),"."),Object(r.b)("h3",{id:"boolean-attributes"},"Boolean attributes"),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'kb {\n\n    class Order {\n\n        ...\n\n        boolean Returned {\n            name.en: "Returned"\n\n            sql: "${ORDERS.returned} = \'yes\'"\n        }\n    }\n}\n')),Object(r.b)("p",null,"Learn more about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/kb-layer/attribute/boolean"}),"boolean attributes here"),"."),Object(r.b)("h3",{id:"class-attributes"},"Class attributes"),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'kb {\n\n    class Customer {\n\n        ...\n\n        /** e.g. JP is from the segment Young&Professionals. */\n        class Segment {\n            name.en: "Segment"\n            \n            sql: "${CUSTOMER.segment}"\n        }\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"This may strike at first as weird. Why not just model it as a string?"),Object(r.b)("p",null,"By modelling as a class with entities, you get to refer to the individual values (entities) in a question, since Veezoo will index them to understand you. This way you can ask 'How many Corporate customers do we have?' and Veezoo will recognize the entity 'Corporate' of class 'Segment', while helping you with AutoComplete."),Object(r.b)("p",null,"The way you have to think about it is: is it actual text (e.g. that you would want to search inside)? If not, it's probably a class."),Object(r.b)("p",null,"A free-text comment field? It's a string in Veezoo."),Object(r.b)("p",null,"A customer? It's a class."),Object(r.b)("p",null,"The first name of a customer? If this is relevant as a standalone concept for your business users, then sure, it's a string. Otherwise, just use it as part of the ",Object(r.b)("inlineCode",{parentName:"p"},"name_sql"),", e.g. ",Object(r.b)("inlineCode",{parentName:"p"},"\"${CUSTOMER.first_name} || ' ' || ${CUSTOMER.last_name}\""),"."),Object(r.b)("p",null,"Learn more about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/kb-layer/attribute/class"}),"class attributes here"),"."),Object(r.b)("h3",{id:"string-attributes"},"String attributes"),Object(r.b)("p",null,"Example:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'kb {\n\n    class Company {\n\n        ...\n\n        /** e.g. Veezoo has the URL "https://www.veezoo.com". */\n        string Website_URL {\n            name.en: "Website"\n            extends: onto.URL\n            \n            sql: "${COMPANY.website_url}"\n        }\n\n        ...\n    }\n}\n')),Object(r.b)("p",null,"Learn more about ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/kb-layer/attribute/string"}),"string attributes here"),"."))}c.isMDXComponent=!0}}]);