"use strict";(self.webpackChunkveezoo_docs=self.webpackChunkveezoo_docs||[]).push([[370],{3905:function(e,t,n){n.d(t,{Zo:function(){return m},kt:function(){return k}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},g=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=s(n),g=r,k=u["".concat(p,".").concat(g)]||u[g]||d[g]||i;return n?a.createElement(k,l(l({ref:t},m),{},{components:n})):a.createElement(k,l({ref:t},m))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=g;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[u]="string"==typeof e?e:r,l[1]=o;for(var s=2;s<i;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}g.displayName="MDXCreateElement"},2697:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return s},default:function(){return N},frontMatter:function(){return p},metadata:function(){return m},toc:function(){return d}});var a=n(7462),r=n(3366),i=(n(7294),n(3905)),l=n(4996),o=["components"],p={id:"user-attributes",title:"User attributes",sidebar_label:"User attributes"},s=void 0,m={unversionedId:"single-sign-on/user-attributes",id:"single-sign-on/user-attributes",title:"User attributes",description:"When using single sign-on with SAML or JWT, you can define some attributes of users in Veezoo based on values from the authentication token:",source:"@site/docs/single-sign-on/user-attributes.mdx",sourceDirName:"single-sign-on",slug:"/single-sign-on/user-attributes",permalink:"/docs/single-sign-on/user-attributes",draft:!1,tags:[],version:"current",frontMatter:{id:"user-attributes",title:"User attributes",sidebar_label:"User attributes"},sidebar:"docs",previous:{title:"JWT",permalink:"/docs/single-sign-on/jwt"},next:{title:"User Roles and Access Management",permalink:"/docs/authorization/user-roles"}},u={},d=[{value:"Attributes",id:"attributes",level:2},{value:"Mapping",id:"mapping",level:2},{value:"Value",id:"value",level:3},{value:"Condition",id:"condition",level:3},{value:"Description",id:"description",level:3},{value:"Syntax",id:"syntax",level:2},{value:"String",id:"string",level:3},{value:"Array",id:"array",level:3},{value:"Variable",id:"variable",level:3},{value:"Condition",id:"condition-1",level:3},{value:"Examples",id:"examples",level:3}],g={toc:d},k="wrapper";function N(e){var t=e.components,p=(0,r.Z)(e,o);return(0,i.kt)(k,(0,a.Z)({},g,p,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"When using single sign-on with SAML or JWT, you can define some attributes of users in Veezoo based on values from the authentication token:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"when using SAML: based on attributes from the SAML assertion"),(0,i.kt)("li",{parentName:"ul"},"when using JWT: based on claims from the JWT")),(0,i.kt)("h2",{id:"attributes"},"Attributes"),(0,i.kt)("p",null,"The following attributes can be configured:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Attribute"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"),(0,i.kt)("th",{parentName:"tr",align:null},"Multi-valued"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Tenant")),(0,i.kt)("td",{parentName:"tr",align:null},"The tenant the user belongs to (only available when using multi-tenancy)"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Type")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's type, i.e. if the user is a Creator or a Viewer"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"First name")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's first name"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Last name")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's last name"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"E-mail")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's e-mail address"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Language")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's preferred language, if supported by a given knowledge graph"),(0,i.kt)("td",{parentName:"tr",align:null},"no")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("strong",{parentName:"td"},"Roles")),(0,i.kt)("td",{parentName:"tr",align:null},"The user's roles"),(0,i.kt)("td",{parentName:"tr",align:null},"yes")))),(0,i.kt)("h2",{id:"mapping"},"Mapping"),(0,i.kt)("p",null,"For each user attribute, you can define one or more mappings that determine the value of the attribute. When a user authenticates, i.e. opens or reloads Veezoo in their browser, the mappings are evaluated and the corresponding user attributes are ",(0,i.kt)("strong",{parentName:"p"},"updated")," accordingly."),(0,i.kt)("p",null,"Mappings are evaluated in order from top to bottom:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"for ",(0,i.kt)("strong",{parentName:"li"},"single-valued")," user attributes, the ",(0,i.kt)("strong",{parentName:"li"},"first matching mapping")," us used"),(0,i.kt)("li",{parentName:"ul"},"for ",(0,i.kt)("strong",{parentName:"li"},"multi-valued")," user attributes, ",(0,i.kt)("strong",{parentName:"li"},"all matching mappings")," are applied.")),(0,i.kt)("p",null,"Each mapping consists of the following fields:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"User attribute mapping",src:n(9968).Z,width:"2222",height:"116"})),(0,i.kt)("h3",{id:"value"},"Value"),(0,i.kt)("p",null,"The value to assign to the user attribute, if the condition holds."),(0,i.kt)("p",null,"For some user attributes (e.g. type), the permitted values are predefined and can be selected using a dropdown. For other attributes (e.g. first name), the entered value must be a ",(0,i.kt)("a",{parentName:"p",href:"#variable"},"variable")," or a ",(0,i.kt)("a",{parentName:"p",href:"#string"},"string"),"."),(0,i.kt)("h3",{id:"condition"},"Condition"),(0,i.kt)("p",null,"The condition which determines if the mapping should be used ",(0,i.kt)("em",{parentName:"p"},"(optional)"),"."),(0,i.kt)("p",null,"If set, then the mapping's value is only assigned to the user attribute if the condition holds, else the mapping is ignored. The entered value must be a ",(0,i.kt)("a",{parentName:"p",href:"#condition-1"},"condition"),"."),(0,i.kt)("h3",{id:"description"},"Description"),(0,i.kt)("p",null,"The description for the mapping ",(0,i.kt)("em",{parentName:"p"},"(optional)"),"."),(0,i.kt)("h2",{id:"syntax"},"Syntax"),(0,i.kt)("p",null,"The following simple syntax can be used to express conditions and reference attributes from the authentication token (i.e. SAML assertion attributes or JWT claims)."),(0,i.kt)("h3",{id:"string"},"String"),(0,i.kt)("p",null,"A string is enclosed in single quotes."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")," ",(0,i.kt)("inlineCode",{parentName:"p"},"'abc'")),(0,i.kt)("h3",{id:"array"},"Array"),(0,i.kt)("p",null,"An array encloses a comma-separated list of strings in brackets."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Example:")," ",(0,i.kt)("inlineCode",{parentName:"p"},"['a', 'b', 'c']")),(0,i.kt)("h3",{id:"variable"},"Variable"),(0,i.kt)("p",null,"A variable references an attribute from the authentication token, i.e. a SAML assertion attribute or JWT claim)."),(0,i.kt)("p",null,"If the variable contains non-alphanumerical characters, then it needs to be enclosed in backticks."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Examples:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"firstName")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"`first-name`")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"`http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname`"))),(0,i.kt)("h3",{id:"condition-1"},"Condition"),(0,i.kt)("p",null,"A condition consists of a left-hand side, an operator and a right-hand side."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Operator"),(0,i.kt)("th",{parentName:"tr",align:null},"Name"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"==")),(0,i.kt)("td",{parentName:"tr",align:null},"Equality"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if the left-hand side is equal to the right-hand side")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"!=")),(0,i.kt)("td",{parentName:"tr",align:null},"Non-equality"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if the left-hand side is not equal to the right-hand side")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"IN")),(0,i.kt)("td",{parentName:"tr",align:null},"Containment"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if the left-hand side is contained in the right-hand side")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NOT IN")),(0,i.kt)("td",{parentName:"tr",align:null},"Non-containment"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if the left-hand side is not contained in the right-hand side")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"AND")," / ",(0,i.kt)("inlineCode",{parentName:"td"},"&&")),(0,i.kt)("td",{parentName:"tr",align:null},"Conjunction"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if both the left-hand side and right-hand side evaluate to true")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"OR")," / ",(0,i.kt)("code",null,"|")),(0,i.kt)("td",{parentName:"tr",align:null},"Disjunction"),(0,i.kt)("td",{parentName:"tr",align:null},"Evaluates to true if either of the left-hand side and right-hand side evaluate to true")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("inlineCode",{parentName:"td"},"NO")," / ",(0,i.kt)("inlineCode",{parentName:"td"},"!")),(0,i.kt)("td",{parentName:"tr",align:null},"Negation"),(0,i.kt)("td",{parentName:"tr",align:null},"Negates the result of the condition")))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Examples:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Equality:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"language == 'fr'"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"departmentCodes == ['D1', 'D2']"),"  "),(0,i.kt)("li",{parentName:"ul"},"Non-equality:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"language != 'fr'"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"departmentCodes != ['D1', 'D2']"),"  "),(0,i.kt)("li",{parentName:"ul"},"Containment:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"departmentCode IN ['D1', 'D2', 'D3']"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"'D1' IN departmentCodes"),"  "),(0,i.kt)("li",{parentName:"ul"},"Non-containment:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"departmentCode NOT IN ['D1', 'D2', 'D3']"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"'D1' NOT IN departmentCodes"),"  "),(0,i.kt)("li",{parentName:"ul"},"Conjunction:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"language == 'fr' && departmentCode IN ['D1', 'D2', 'D3']"),"  "),(0,i.kt)("li",{parentName:"ul"},"Disjunction:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"language == 'fr' || departmentCode IN ['D1', 'D2', 'D3']"),"  "),(0,i.kt)("li",{parentName:"ul"},"Negation:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"NOT language == 'fr'"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"! language == 'fr'"),"  "),(0,i.kt)("li",{parentName:"ul"},"Parentheses:",(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"!(language == 'fr')"),(0,i.kt)("br",{parentName:"li"}),(0,i.kt)("inlineCode",{parentName:"li"},"((a == '1' OR a == '2') AND NOT(b == '3'))"),"  ")),(0,i.kt)("admonition",{type:"info"},(0,i.kt)("ul",{parentName:"admonition"},(0,i.kt)("li",{parentName:"ul"},"A string is considered to be equal to an array holding exactly that string\nE.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"'a' == ['a']")," holds true"),(0,i.kt)("li",{parentName:"ul"},"The left-hand side of a (non-)containment condition can be an array\nE.g. ",(0,i.kt)("inlineCode",{parentName:"li"},"['b', 'a'] IN ['a', 'b', 'c']")," holds true"))),(0,i.kt)("h3",{id:"examples"},"Examples"),(0,i.kt)("p",null,"Consider the following SAML assertion:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'<samlp:Response ...>\n  ...\n    <saml:AttributeStatement>\n      <saml:Attribute Name="firstName" ...>\n        <saml:AttributeValue ...>John</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="departmentCode" ...>\n        <saml:AttributeValue ...>D1</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="language" ...>\n        <saml:AttributeValue ...>fr</saml:AttributeValue>\n      </saml:Attribute>\n      <saml:Attribute Name="roles" ...>\n        <saml:AttributeValue ...>internal-admin</saml:AttributeValue>\n        <saml:AttributeValue ...>veezoo-admin</saml:AttributeValue>\n      </saml:Attribute>\n    </saml:AttributeStatement>\n  ...\n</samlp:Response>\n')),(0,i.kt)("p",null,"The following examples illustrate some mappings and what they evaluate to given the above SAML assertion:"),(0,i.kt)("img",{alt:"Mapping example 1",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-1.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"abc")),(0,i.kt)("img",{alt:"Mapping example 2",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-2.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"John")),(0,i.kt)("img",{alt:"Mapping example 3",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-3.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"John")),(0,i.kt)("img",{alt:"Mapping example 4",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-4.png")}),(0,i.kt)("p",null,"\u2192 The mapping doesn't match"),(0,i.kt)("img",{alt:"Mapping example 5",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-5.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"Creator")),(0,i.kt)("img",{alt:"Mapping example 6",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-6.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"Creator")),(0,i.kt)("img",{alt:"Mapping example 7",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-7.png")}),(0,i.kt)("p",null,"\u2192 The mapping doesn't match"),(0,i.kt)("img",{alt:"Mapping example 8",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-8.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to ",(0,i.kt)("inlineCode",{parentName:"p"},"Fran\xe7ais")),(0,i.kt)("img",{alt:"Mapping example 9",width:"700",src:(0,l.Z)("/img/single-sign-on/saml/mapping-example-9.png")}),(0,i.kt)("p",null,"\u2192 The mapping matches and evaluates to the empty string"))}N.isMDXComponent=!0},9968:function(e,t,n){t.Z=n.p+"assets/images/user-attribute-mapping-d27a69d45b32e67df8432c3b6061680f.png"}}]);