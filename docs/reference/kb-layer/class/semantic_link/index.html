<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">semantic_link | The Hitchhiker&#x27;s Guide to Veezoo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="semantic_link | The Hitchhiker&#x27;s Guide to Veezoo"><meta data-react-helmet="true" name="description" content="Definition"><meta data-react-helmet="true" property="og:description" content="Definition"><meta data-react-helmet="true" property="og:url" content="https://open-veezoo.github.io/docs/reference/kb-layer/class/semantic_link"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://open-veezoo.github.io/docs/reference/kb-layer/class/semantic_link"><link rel="stylesheet" href="/styles.4d17793a.css">
<link rel="preload" href="/styles.c26460d8.js" as="script">
<link rel="preload" href="/runtime~main.ad555274.js" as="script">
<link rel="preload" href="/main.11703f69.js" as="script">
<link rel="preload" href="/1.f723760c.js" as="script">
<link rel="preload" href="/2.da4d1fcb.js" as="script">
<link rel="preload" href="/35.9488beec.js" as="script">
<link rel="preload" href="/36.31dc5354.js" as="script">
<link rel="preload" href="/935f2afb.621e8e29.js" as="script">
<link rel="preload" href="/17896441.48b53171.js" as="script">
<link rel="preload" href="/65881e2e.5ac9f055.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_full.png" alt="Veezoo Logo"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_full.png" alt="Veezoo Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">The Fundamentals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/db-layer">Database Layer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/kb-layer">Knowledge Base Layer</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Knowledge Base Layer</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">General configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/general/name">name</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/general/display_name">display_name</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/general/synonym">synonym</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Class configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class">What is a class?</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reference/kb-layer/class/semantic_link">semantic_link</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class/default_date">default_date</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class/default_order">default_order</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class/display_with">display_with</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class/creation_date">creation_date</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/kb-layer/class/extends">extends</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Entity configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/entity">What is an entity?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Relation configurations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation">What is a relation?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">semantic_link</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/class">to: Class</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/date">to: Date</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/double-integer">to: Double/Integer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/boolean">to: Boolean</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/string">to: String</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/kb-layer/relation/semantic_link/intermediate-tables-and-multi-joins">Intermediate Tables and Multi-Joins</a></li></ul></li></ul></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">semantic_link</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="definition"></a>Definition<a aria-hidden="true" tabindex="-1" class="hash-link" href="#definition" title="Direct link to heading">#</a></h2><p>The Semantic Link is the SQL definition of a <code>knowledge-base</code> concept.</p><p>In the case of a class, it defines if this class comes from a table or a column, what a unique key (<code>id_sql</code>) for this class is and how its <a href="/docs/reference/kb-layer/entity">entities</a> are generated from SQL, if it should have any.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="usage"></a>Usage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#usage" title="Direct link to heading">#</a></h2><p>A class can be defined by a table, a column or a SQL. Let&#x27;s take the example of a table <code>customer(id, name, status)</code>.</p><p>In this example, Veezoo will generate two classes: <code>kb.Customer</code> and <code>kb.Status</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="class-defined-by-table"></a>Class defined by Table<a aria-hidden="true" tabindex="-1" class="hash-link" href="#class-defined-by-table" title="Direct link to heading">#</a></h3><p>In the case of <code>kb.Customer</code>, we have a class defined by a table <code>customer</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Customer </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Customer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        semantic_link</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> DB_TableClassSemanticLink</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            entities_definition</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. [00042] Arthur Dent</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name_sql.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&#x27;[&#x27; || ${customer.id} || &#x27;] &#x27; || ${customer.name}&quot;</span><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. Arthur Dent</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                synonym_sql.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${customer.name}&quot;</span><span class="token plain">                                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. 00042</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id_sql</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${customer.id}&quot;</span><span class="token plain">                                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            from_table</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Table Classes need to have</p><ul><li>the right tag <code>tag: DB_TableClassSemanticLink</code>, </li><li>a reference to the table <code>from_table: customer</code> and </li><li>a SQL expression that uniquely identifies it <code>id_sql: &quot;${customer.id}&quot;</code>, used for Joins as a key.</li></ul><p>Optionally, if it is a class with values that you may want to refer to in questions (e.g. a specific customer), it makes sense to define the entities of this class.</p><p>To do this you will add an <code>entities_definition</code>, specifying how the <a href="/docs/reference/kb-layer/general/name">name</a> of the entity and optionally also <a href="/docs/reference/kb-layer/general/synonym">synonyms</a> to it will be generated.
In our example, after clicking on the <code>Sync Entities</code> button in the Editor when you have the class file open, you will get entities like this:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb.Customer </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    entity </span><span class="token number" style="color:rgb(247, 140, 108)">00042</span><span class="token plain">_Arthur_Dent_</span><span class="token number" style="color:rgb(247, 140, 108)">1234</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">         </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;[00042] Arthur Dent&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        synonym.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Arthur Dent&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        id</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00042&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div></div></div><p>In the case of a class called <code>kb.Order</code>, you may prefer not to have any entities defined. This means the whole section <code>entities_definition</code> will be left out.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="class-defined-by-column"></a>Class defined by Column<a aria-hidden="true" tabindex="-1" class="hash-link" href="#class-defined-by-column" title="Direct link to heading">#</a></h3><p>In our example, the class <code>kb.Status</code> was defined by the column <code>status</code> in the <code>customer</code> table. Let&#x27;s take a look at how it would be defined in VKL.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Status </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Status&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        semantic_link</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            entities_definition</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. ACTIVE</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                name_sql.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${customer.status}&quot;</span><span class="token plain">       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. ACTIVE</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id_sql</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${customer.status}&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Each entity of the class <code>kb.Status</code> is uniquely defined by the <code>id_sql</code> expression, which also happens to be the <code>name_sql</code> for the entities.
In this case, there is no <code>synonym_sql</code> defined.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="advanced-class-defined-by-a-sql"></a>Advanced: Class defined by a SQL<a aria-hidden="true" tabindex="-1" class="hash-link" href="#advanced-class-defined-by-a-sql" title="Direct link to heading">#</a></h3><p>The last way you can define a class is over a SQL query that follows a specific form.</p><p>Let&#x27;s take the example of two tables <code>customer(id, email)</code> and <code>profile(id, customer_id, name)</code>. For whatever reason, we have now two tables with information about a customer. For simplicity sake, let&#x27;s assume that <code>profile</code> only has one entry per customer.</p><p>Now, we don&#x27;t want to make <code>profile</code> accessible over Veezoo, since it is just extra information that was separated technically in different tables. Our business users have no clue why it is separated and they don&#x27;t want to care about it.</p><p>What we will do instead now is to join both these tables so we can generate entities of the class <code>kb.Customer</code> with nice-looking names.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Customer </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Customer&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        semantic_link</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">DB_TableClassSemanticLink</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> DB_CustomSQLSemanticLink</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            entities_definition</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                entities_custom_sql</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    SELECT</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        c.id AS ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&#x27; || c.id || &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> &#x27; || p.name AS LABEL_EN_MAIN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        p.name AS LABEL_EN_</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    FROM</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                        customer c JOIN profile p ON c.id = p.customer_id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&quot;</span><span class="token plain">&quot;                                 </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// e.g. 00042</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            id_sql</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${customer.id}&quot;</span><span class="token plain">                                                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            from_table</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>As you can notice, we had to add an additional tag <code>DB_CustomSQLSemanticLink</code> and, instead of a <code>name_sql</code>, we defined an <code>entities_custom_sql</code>.</p><p>Let&#x27;s take a closer look at the SQL:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-sql codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">SELECT</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id </span><span class="token keyword" style="font-style:italic">AS</span><span class="token plain"> ID</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;[&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;] &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">||</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token keyword" style="font-style:italic">AS</span><span class="token plain"> LABEL_EN_MAIN</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">name </span><span class="token keyword" style="font-style:italic">AS</span><span class="token plain"> LABEL_EN_1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">FROM</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    customer c </span><span class="token keyword" style="font-style:italic">JOIN</span><span class="token plain"> profile p </span><span class="token keyword" style="font-style:italic">ON</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">id </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">customer_id</span></div></div></div></div></div><p>An <code>entities_custom_sql</code> always needs to have in the SELECT:</p><ul><li>one <code>ID</code> column, coinciding with the <code>id_sql</code>, and </li><li>a <code>LABEL_{LANGUAGE-TAG}_MAIN</code>, which will define the <code>name</code> of entities, similar to a <code>name_sql</code> in the previous cases.</li></ul><p>Optionally, every other <code>LABEL_{LANGUAGE-TAG}_*</code> defined is used the same way as <code>synonym_sql</code> is used in the previous sections.</p><p>It is important to notice that this SQL is only used to generate entities during Sync time, not query time. If you are interested in using custom SQLs during query time, please refer to virtual_table in the <code>database</code> part.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/reference/kb-layer/class/semantic_link.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/kb-layer/class"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« What is a class?</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/kb-layer/class/default_date"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">default_date Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#definition" class="table-of-contents__link">Definition</a></li><li><a href="#usage" class="table-of-contents__link">Usage</a><ul><li><a href="#class-defined-by-table" class="table-of-contents__link">Class defined by Table</a></li><li><a href="#class-defined-by-column" class="table-of-contents__link">Class defined by Column</a></li><li><a href="#advanced-class-defined-by-a-sql" class="table-of-contents__link">Advanced: Class defined by a SQL</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://twitter.com/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://veezoo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 Veezoo AG. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.c26460d8.js"></script>
<script src="/runtime~main.ad555274.js"></script>
<script src="/main.11703f69.js"></script>
<script src="/1.f723760c.js"></script>
<script src="/2.da4d1fcb.js"></script>
<script src="/35.9488beec.js"></script>
<script src="/36.31dc5354.js"></script>
<script src="/935f2afb.621e8e29.js"></script>
<script src="/17896441.48b53171.js"></script>
<script src="/65881e2e.5ac9f055.js"></script>
</body>
</html>