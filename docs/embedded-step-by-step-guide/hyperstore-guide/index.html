<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-embedded-step-by-step-guide/hyperstore-guide">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">How to embed Veezoo: a Demonstration | The Hitchhiker&#x27;s Guide to Veezoo</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://open-veezoo.github.io/docs/embedded-step-by-step-guide/hyperstore-guide"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to embed Veezoo: a Demonstration | The Hitchhiker&#x27;s Guide to Veezoo"><meta data-rh="true" name="description" content="Hello dear user!"><meta data-rh="true" property="og:description" content="Hello dear user!"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://open-veezoo.github.io/docs/embedded-step-by-step-guide/hyperstore-guide"><link data-rh="true" rel="alternate" href="https://open-veezoo.github.io/docs/embedded-step-by-step-guide/hyperstore-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://open-veezoo.github.io/docs/embedded-step-by-step-guide/hyperstore-guide" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://1XLFHGRRDB-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="The Hitchhiker&#39;s Guide to Veezoo" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.761c0536.css">
<link rel="preload" href="/assets/js/runtime~main.20a83300.js" as="script">
<link rel="preload" href="/assets/js/main.b7416284.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo_full.png" alt="Veezoo Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo_full_dark.png" alt="Veezoo Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>How to embed Veezoo: a Demonstration</h1><p>Hello dear user!</p><p>This is a step-by-step guide on how to set up a locally hosted demo website, which has Veezoo embedded. It is meant to give users a first impression on how you could integrate the power of Veezoo into your product. This guide can be viewed as a sort of companion to the embedded Veezoo docs (<a href="https://docs.veezoo.com/docs/embedded/embedded-guide/" target="_blank" rel="noopener noreferrer">https://docs.veezoo.com/docs/embedded/embedded-guide/</a>). Those docs are much more general and explain all different options available, as well as all the details already implemented in this demo. This guide repeats some of the points mentioned there, so that this is all you need to set it up. The goal here is not to demonstrate all the details, but to get a clean, working version (with all basic features) up and running as easily as possible. Have fun!</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="0-requirements">0. Requirements<a href="#0-requirements" class="hash-link" aria-label="Direct link to 0. Requirements" title="Direct link to 0. Requirements">​</a></h3><p>This project includes all the code you need to host the demo website on your local machine, as well as a demo dataset you can use. Alternatively you can integrate your own dataset just as well, though this tutorial will assume you use the dataset provided (This will mainly matter in step 5., where it will be mentioned again). To run this project, you need a Veezoo account that has embedding enabled (this feature is per default not enabled) and enough available <em>knowledge graphs</em> (at least 2) and <em>users</em>, as well as access to a data warehouse like PostgreSQL or Big Query (Veezoo embedding is not compatible with spreadsheets directly uploaded to Veezoo).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="05-our-demo-the-hyperstore">0.5. Our Demo: the Hyperstore<a href="#05-our-demo-the-hyperstore" class="hash-link" aria-label="Direct link to 0.5. Our Demo: the Hyperstore" title="Direct link to 0.5. Our Demo: the Hyperstore">​</a></h3><p>A short note on the demo we are building: the Hyperstore. The Hyperstore is a fictional online marketplace, where different vendors can sell their products. A lot of products are ordered and shipped to customers all over the US. All these transactions create a lot of data of course, which are saved in three tables: <em>Customer</em>, <em>Order</em> and <em>Product</em>. We are now implementing a back end for our vendors (currently three), which would like to get insights from their data. Now, we as managers of Hyperstore want to give our vendors as much insight as possible, though only about their own transactions. That&#x27;s why we naturally came to the conclusion, we have to implement Veezoo :-)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-getting-started">1. Getting started<a href="#1-getting-started" class="hash-link" aria-label="Direct link to 1. Getting started" title="Direct link to 1. Getting started">​</a></h3><p>To get started, upload the <em>hyperstore</em> spreadsheet contained in this repo to your data warehouse (in case you don&#x27;t want to use your own dataset). If you don&#x27;t already have one, create a Veezoo account and make sure it includes at least 2 <em>knowledge graphs</em>. Either use a free trial for a higher tier account, or contact Veezoo to enable a second <em>knowledge graphs</em> in your free account. Connect it to your data warehouse, as you would for regular Veezoo usage. You can follow this guide: <a href="https://docs.veezoo.com/docs/" target="_blank" rel="noopener noreferrer">https://docs.veezoo.com/docs/</a> (as mentioned before, connecting to an Excel spreadsheet will not work). Select the data you want to work with and configure it to your desires and ask a couple of questions to ensure that everything is working properly.</p><p>Once everything looks fine, contact Veezoo to enable embedding. This can only be done manually by Veezoo. </p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-initial-veezoo-configurations">2. Initial Veezoo Configurations<a href="#2-initial-veezoo-configurations" class="hash-link" aria-label="Direct link to 2. Initial Veezoo Configurations" title="Direct link to 2. Initial Veezoo Configurations">​</a></h3><p>Once you have been granted access to the embedded option, open <em>Veezoo Admin</em> and navigate to <em>Embedded</em> &gt;&gt; <em>Configuration</em> and make sure the Toggle Switch is <strong>ON</strong> (Embedding is enabled). For secure embedding, you need to specify the allowed hosts. This ensures that your Veezoo content is only accessible from your designated, trusted domains. In our case this means add <a href="http://127.0.0.1:5000/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:5000/</a> (local host) as an allowed origin. </p><p>Veezoo uses JWT for user authentication within Embedded Analytics. To enable secure access to relevant data and analytics, your application will have to generate a JWT on your server and pass it to Veezoo. For that to work, we need to configure in <em>Veezoo Admin</em> the public key for a private key that will be used by your application to sign the token.</p><p>If you don&#x27;t know how to create a key pair, follow the instructions provided. Add the public key as text in the corresponding field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-create-tenants">3. Create Tenants<a href="#3-create-tenants" class="hash-link" aria-label="Direct link to 3. Create Tenants" title="Direct link to 3. Create Tenants">​</a></h3><p>To access Veezoo via embedding, you have to specify the tenant you are. Tenants can later be used to restrict access of users to certain parts of your data (in our example, we want vendors only to be able to access data about their own transactions). As a start, we will create 4 of them.</p><p>In <em>Veezoo Admin</em>, navigate to <em>Embedded</em> &gt;&gt; <em>Tenants</em>. Click on <em>CREATE</em>. Set the ID to 0, give the tenant the name &quot;Admin&quot; and click on <em>CREATE</em>. Create 3 additional tenants called &quot;Furniture Shop&quot;, &quot;Office Supplies Shop&quot; and &quot;Technology Shop&quot; with IDs 1, 2 and 3 respectively. These represent an Admin of Hyperstore (who will see everything) and the three vendors.</p><p>We now have to grant these tenants access to a specific <em>knowledge graph</em>. Open <em>Veezoo Studio</em> and select the <em>hyperstore knowledge graph</em> you created earlier and click on <em>Tenant Access</em>. Click on <em>CREATE</em> to add all your newly created tenants. Veezoo is now ready for embedding.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-setting-up-the-local-website">4. Setting up the Local Website<a href="#4-setting-up-the-local-website" class="hash-link" aria-label="Direct link to 4. Setting up the Local Website" title="Direct link to 4. Setting up the Local Website">​</a></h3><p>Download the project in this repo. The website is created using Python Flask. First, install the libraries <code>cryptography</code>, <code>pyjwt</code>, and <code>uuid</code> with pip. To locally run the website, there are a couple of things you have to change in the code. </p><p>Open the <code>app.py</code> file. Insert your private key where it says &quot;<em>INSERT PRIVATE KEY HERE</em>&quot;. This is the one you previously created and corresponds to the public key you added to Veezoo. Now take a look at the functions <code>Admin()</code>, <code>Flavia()</code>, <code>Oliver()</code> and <code>Tom()</code>. Here we have to adjust the URLs. In the second to last line of each function it currently says:
<code>veezoo_url = f&quot;https://embedded-demo.app.veezoo.com?jwt={jwt}&amp;embedded=true&quot;</code>
Take a look at Veezoo in your browsers and check what the domain is. It should be something like <code>&lt;yourname&gt;.app.veezoo.com/...</code>. Back in the python code, change <code>embedded-demo</code> in each function to whatever <code>&lt;yourname&gt;</code> is. </p><p>Now open the four HTML files <code>Admin.html</code>, <code>Flavia.html</code>, <code>Oliver.html</code> and <code>Tom.html</code>. In each file, there are two places in the code where it says <code>https://embedded-demo.app.veezoo.com</code>. Change every instance to <code>https://&lt;yourname&gt;.app.veezoo.com</code>.</p><p>You are now ready to run the code. When you do so, you can open a browser and go to <a href="http://127.0.0.1:5000/" target="_blank" rel="noopener noreferrer">http://127.0.0.1:5000/</a> to see your newly created website. If you are using Chrome (which I recommend), I would suggest you open a guest-tab (click on your profile in the top right corner, click on &quot;guest&quot;), otherwise you have to clear your cookies every time you open <em>Veezoo Studio</em> again. On the page, you should see on the top right a <em>Sign in!</em> button. Click on it and choose a user. You can now enjoy the full embedded Veezoo experience.</p><p>As this is a demo site, most buttons are for decoration, but if you click on <em>Dashboards</em> you will see an overview of this user&#x27;s dashboards. You can display them by clicking on them. As in regular Veezoo, you can create new dashboards in the chat, which then will also show up here. These boards are visible only be visible to the user who created them (just like regular Veezoo).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-limiting-access-and-virtual-tables">5. Limiting access and Virtual Tables<a href="#5-limiting-access-and-virtual-tables" class="hash-link" aria-label="Direct link to 5. Limiting access and Virtual Tables" title="Direct link to 5. Limiting access and Virtual Tables">​</a></h3><p>So far we have four users on our website. They all can create their own boards, but we want to go a bit further. The main advantage of having different tenants (and not just different users) is to limit their access to the database, which is what we are going to do next.</p><p>The next steps are pretty specific to the Hyperstore database. If you are using your own, you can of course still follow along, but of course you won&#x27;t be able to copy everything 1:1.</p><p>As mentioned above, three of our four tenants represent different vendors who use our Hyperstore platform to sell their products. We would like to restrict their access to the database, such that they can only see their products, orders of their products and customers who have bought their products. Veezoo offers two ways to restrict access: <em>Authorization over Virtual Tables</em> and <em>Authorization over Database Connection</em>. In this demo, we are going to use <em>Virtual Tables</em>. If you are interested <em>Authorization over Database Connection</em>, you can find more information about it in the general embedding guide: <a href="https://docs.veezoo.com/docs/embedded/embedded-guide" target="_blank" rel="noopener noreferrer">https://docs.veezoo.com/docs/embedded/embedded-guide</a></p><p>In Veezoo, we can create <em>Variables</em> associated with tenants, which then can be used in the SQL. By default, each tenant already has a <code>veezoo.Tenant.Id</code> variable, with the ID you configured earlier. With these we will restrict the access.</p><p>Virtual tables are basically just extra SQL code put in front of your table. Instead of accessing the <em>Customer</em> table directly, we first go through this extra step. To create the virtual tables, open <em>Veezoo Studio</em> and click on the folder icon (hovering over it displays the text &quot;Show the file tree&quot;). Within the <em>database</em> folder (not the <em>knowledge-base</em> folder!) find the folder labeled <em>Product</em> and open the <code>table.ttl</code> file. It should look something like this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.storage.embedded_hyperstore.public {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    table Product {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        identifier: &quot;Product&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        column Category {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            identifier: &quot;Category&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            primitive_type: &quot;text&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(The first line might look slightly different, but that doesn&#x27;t matter and we aren&#x27;t going to change it)
Change it to this:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.storage.embedded_hyperstore.public {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    virtual_table Product {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        identifier: &quot;Product&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        virtual_table_sql: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             SELECT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             FROM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Product&quot; p</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             WHERE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 p.&quot;Provider ID&quot; = ${quote(veezoo.Tenant.Id)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             OR</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 ${quote(veezoo.Tenant.Id)} = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        column Category {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            identifier: &quot;Category&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            primitive_type: &quot;text&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, when you ask questions about the product, the <code>virtual_table_sql</code> will be executed first, and using the Tenant ID. For example as a Technology Shop tenant with ID = 3 you will only see products with <em>Provider ID = 3</em> (which in our example are all the products that are in the &quot;Technology&quot; <em>Category</em>). The <code>OR</code>clause is added so that the Admin user can see everything.</p><p>In a similar fashion, change the <code>table.ttl</code> files within the <em>Customer</em> and <em>Order</em> folders.
<em>Order</em>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.storage.embedded_hyperstore.public {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    virtual_table Order {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        identifier: &quot;Order&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        virtual_table_sql: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             SELECT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 o.*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             FROM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Order&quot; o</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             JOIN</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Product&quot; p</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             ON</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 o.&quot;Product ID&quot; = p.&quot;Product ID&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             WHERE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 p.&quot;Provider ID&quot; = ${quote(veezoo.Tenant.Id)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             OR</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 ${quote(veezoo.Tenant.Id)} = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>and <em>Customer</em>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">db.storage.embedded_hyperstore.public {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    virtual_table Customer {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        identifier: &quot;Customer&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        virtual_table_sql: </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             SELECT DISTINCT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 c.*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             FROM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Customer&quot; c</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             JOIN</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Order&quot; o</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             ON</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 c.&quot;Customer ID&quot; = o.&quot;Customer ID&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             JOIN</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 &quot;Product&quot; p</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             ON</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 o.&quot;Product ID&quot; = p.&quot;Product ID&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             WHERE</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 p.&quot;Provider ID&quot; = ${quote(veezoo.Tenant.Id)}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">             OR</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                 ${quote(veezoo.Tenant.Id)} = 0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is already everything we need to add. Save the changes. Now we need to update the tenants <em>knowledge graph</em>. In <em>Veezoo Studio</em>, go to <em>Tenant Access</em>, select all tenants and click on <em>UPDATE</em>.</p><p>The last thing we need to do, is to give the default user (you, when you access this <em>knowledge graph</em> via regular Veezoo) a <code>veezoo.Tenant.Id</code> value (right now you would get error messages in the chat, since the SQL code now uses this variable). Click on the pencil icon in the top row (the one without <em>Tenant ID</em> or <em>Name</em>) and set the ID to 0.</p><p>Congraz, you are done! :-)</p><p>If you now open the chat in your demo website again, you will get different results for different users. To see this clearly, type &quot;Products&quot; and you will see that all of the displayed ones have the same <em>Category</em> (except of course you are logged in with the Admin account).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h3><p>I hope you have fun playing around with this demo. If you want to build your own project, or run into problems when tinkering with this one, I recommend looking into the embedded Veezoo docs, where you can find more detailed explanations, or contact Veezoo, we are happy to help! </p><p>I wish you a nice day, and hopefully we can soon help you empower your Software by embedding Veezoo :-)</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/embedded-step-by-step-guide/hyperstore-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#0-requirements" class="table-of-contents__link toc-highlight">0. Requirements</a></li><li><a href="#05-our-demo-the-hyperstore" class="table-of-contents__link toc-highlight">0.5. Our Demo: the Hyperstore</a></li><li><a href="#1-getting-started" class="table-of-contents__link toc-highlight">1. Getting started</a></li><li><a href="#2-initial-veezoo-configurations" class="table-of-contents__link toc-highlight">2. Initial Veezoo Configurations</a></li><li><a href="#3-create-tenants" class="table-of-contents__link toc-highlight">3. Create Tenants</a></li><li><a href="#4-setting-up-the-local-website" class="table-of-contents__link toc-highlight">4. Setting up the Local Website</a></li><li><a href="#5-limiting-access-and-virtual-tables" class="table-of-contents__link toc-highlight">5. Limiting access and Virtual Tables</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://veezoo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Veezoo AG. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.20a83300.js"></script>
<script src="/assets/js/main.b7416284.js"></script>
</body>
</html>