<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<title data-react-helmet="true">Knowledge Base Layer | The Hitchhiker&#x27;s Guide to Veezoo</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Knowledge Base Layer | The Hitchhiker&#x27;s Guide to Veezoo"><meta data-react-helmet="true" name="description" content="The knowledge-base layer (kb) is where the magic happens. The idea behind the kb layer is to model your data semantically, i.e. as if you would be explaining to a person what your database is really about."><meta data-react-helmet="true" property="og:description" content="The knowledge-base layer (kb) is where the magic happens. The idea behind the kb layer is to model your data semantically, i.e. as if you would be explaining to a person what your database is really about."><meta data-react-helmet="true" property="og:url" content="https://open-veezoo.github.io/docs/kb-layer"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://open-veezoo.github.io/docs/kb-layer"><link rel="stylesheet" href="/styles.4d17793a.css">
<link rel="preload" href="/styles.cca0e727.js" as="script">
<link rel="preload" href="/runtime~main.48bc9291.js" as="script">
<link rel="preload" href="/main.81d16a04.js" as="script">
<link rel="preload" href="/common.b66f2353.js" as="script">
<link rel="preload" href="/10.838593d4.js" as="script">
<link rel="preload" href="/11.8fd86019.js" as="script">
<link rel="preload" href="/935f2afb.b831d62a.js" as="script">
<link rel="preload" href="/17896441.f47bd667.js" as="script">
<link rel="preload" href="/8a8aadd4.da239053.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_full.png" alt="Veezoo Logo"><strong class="navbar__title"></strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_full.png" alt="Veezoo Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">The Fundamentals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/db-layer">Database Layer</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/kb-layer">Knowledge Base Layer</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Knowledge Base Layer</h1></header><div class="markdown"><p>The <code>knowledge-base</code> layer (<code>kb</code>) is where the magic happens. The idea behind the <code>kb</code> layer is to model your data semantically, i.e. as if you would be explaining to a person what your database is really about.</p><p>For this modelling, we have to introduce a new vocabulary:</p><ul><li>Classes</li><li>Entities</li><li>Relations</li><li>Literal types</li></ul><p>Let&#x27;s see in detail what each of these things actually mean.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="classes-and-entities"></a>Classes and Entities<a aria-hidden="true" tabindex="-1" class="hash-link" href="#classes-and-entities" title="Direct link to heading">#</a></h2><p>If you come from a software background, you may be familiar with the idea of a class as defined in object-oriented programming. In some sense, we are making your data more object-oriented.
So, a class can be defined as a category of things. The best way to understand it is to go over some examples.</p><p>A class could be something like:</p><ul><li><code>Customer</code></li><li><code>Country</code></li><li><code>Order</code></li><li><code>Movie</code></li></ul><p>Now, each of these classes may have instantiations of it. In programming, we call these &quot;objects&quot;. In VKL, we call them <code>entities</code>.
So following our example, we may have entities like:</p><ul><li>entity <code>Till_Haug</code> of class <code>Customer</code> </li><li>entity <code>Brazil</code> of class <code>Country</code></li><li>entity <code>Batman</code> of class <code>Movie</code></li></ul><p>But what about <code>Order</code>? For classes like <code>Order</code>, <code>Transaction</code> and <code>Event</code>, it makes sense usually to model it as a class without entities. Prefer to use classes with entities when there is a way to refer to an individual of this class in a question.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="vkl-classes-and-entities"></a>VKL: Classes and Entities<a aria-hidden="true" tabindex="-1" class="hash-link" href="#vkl-classes-and-entities" title="Direct link to heading">#</a></h3><p>Let&#x27;s see how they are defined in VKL.</p><p>File: <em>hitchhiker/knowledge-base/classes/Customer/class.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Customer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en: &quot;Customer&quot;     </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        synonym.en: [&quot;Client&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        refersTo: onto.Customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            entitiesDefinition: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                nameSqlPattern.en:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;CONCAT(${ORDERS.customer_firstname}, &#x27; &#x27;, ${ORDERS.customer_lastname})&quot;    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            idSqlPattern: &quot;${ORDERS.customer_id}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Let&#x27;s break it down in parts:</p><ul><li><code>name.en</code>: The name of the class in the specified language (<code>en</code> for English). This is the primary way to refer to this concept in a question and what gets displayed to the user in an answer.</li><li><code>synonym.en</code>: Synonyms specify alternative ways to refer to this concept in a question. In our example, we can say &quot;how many customers&quot;, but also &quot;how many clients&quot; and it will mean the same.</li><li><code>refersTo</code>: By using this optional attribute, you can point your class to a pre-defined ontology class and inherit labels and other functionalities from it. Studio already does this automatically to the best of its knowledge. To find out more about ontologies, check [Ontologies].</li></ul><p>And then we get to the glue between the <code>knowledge-base</code> layer and the <code>database</code> layer, namely the Semantic Link. </p><ul><li><code>idSqlPattern</code>: Specifies in a SQL-like format how to uniquely identify an entity of this class in the database. Usually this is a key. In our example, this would be the <code>customer_id</code> for the customer class. For the class <code>Order</code>, we still define an <code>idSqlPattern</code>, even though we won&#x27;t specify <code>entitiesDefinition</code>.</li><li><code>entitiesDefinition</code>: This block defines how entities will be generated for the given class.<ul><li><code>nameSqlPattern.en</code>: Specifies in a SQL-like format how to generate the name for the entities of this class. In our example, this would be by concatenating the first name and the last name in SQL.</li><li><code>synonymSqlPattern.en</code> (optional): Specifies in a SQL-like format how to generate alternative ways to refer to the entities.</li></ul></li></ul><p>It is important to notice that to be able to use the SQL table definitions with a short-hand notation, we had to import its reference in the header of the file (<code>import: [ db.postgres... ]</code>).</p><p>File: <em>hitchhiker/knowledge-base/classes/Customer/entities.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb.Customer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    entity Till_Haug {          </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        name.en: &quot;Till Haug&quot;  // automatically generated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        synonym.en: [&quot;Tillio&quot;, &quot;Mr. Haug&quot;]  // manually added</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        sqlId: &quot;1&quot;  // automatically generated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>As you can see here, we have <code>name</code> and <code>sqlId</code> automatically generated based on our definition in the class&#x27; <code>semanticLink</code>. You can freely add new synonyms over labels or adapt the <code>name</code> and see the effect straight away in Veezoo.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="literal-types"></a>Literal Types<a aria-hidden="true" tabindex="-1" class="hash-link" href="#literal-types" title="Direct link to heading">#</a></h2><p>Literal types are your usual data types like: <code>Double</code>, <code>Integer</code>, <code>Date</code>, <code>Boolean</code> and <code>String</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relations"></a>Relations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relations" title="Direct link to heading">#</a></h2><p>A relation in VKL describes how classes and other classes or literal types relate to each other. </p><p>Example:</p><ul><li><code>Till_Haug</code> <em>works at</em> <code>Veezoo_AG</code></li><li><code>JP_Monteiro</code> <em>was born on</em> <code>30th of March 1993</code></li><li><code>Brazil</code> <em>has a population of</em> <code>209&#x27;500&#x27;000</code></li></ul><p>In other words, we have the following relations:</p><ul><li><code>works_at</code> is a relation that goes from <code>Employee</code> to <code>Company</code></li><li><code>birthdate</code> is a relation that goes from <code>Person</code> to the literal type <code>Date</code></li><li><code>population</code> is a relation that goes from <code>Country</code> to the literal type <code>Integer</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="vkl-relations"></a>VKL: Relations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#vkl-relations" title="Direct link to heading">#</a></h3><p>Let&#x27;s look now at our movie e-commerce example.</p><p>Veezoo generates automatically relations and puts them in the file of its domain class, e.g. <code>population</code> can be found inside <code>kb.Country</code> class definition.</p><p>Relations, as we have seen, are binary and can be between:</p><ul><li><code>class</code> and <code>class</code></li><li><code>class</code> and a literal type (<code>Date</code>, <code>Boolean</code>, <code>Integer</code>, <code>Double</code>)</li></ul><p>In general, the syntax is the same, but we will analyze them individually.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relation-class---class"></a>Relation: Class -&gt; Class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relation-class---class" title="Direct link to heading">#</a></h4><p>Let&#x27;s take the relation between <code>Order</code> and <code>Customer</code>.</p><p>Extensive form:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ... </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            idSqlPattern: &quot;${ORDERS.id}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation from_Customer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            displayName.en: &quot;from&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            from: kb.Order</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: kb.Customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                from_sql: &quot;${ORDERS.id}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                to_sql: &quot;${ORDERS.customer_id}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>These are the properties we have defined:</p><ul><li><code>displayName.en</code>: This specifies how this relation gets displayed to the user in an answer, but is not used to refer to it in a question. In our example, we don&#x27;t want the word &quot;from&quot; to be always taken to mean this relation in a question, so we specify it as a <code>displayName</code>, instead of a <code>name</code>.</li><li><code>from</code> and <code>to</code>: This relation connects the class specified in <code>from</code> with the one in <code>to</code>.</li><li><code>semanticLink</code>: Defines how the relation is translated to SQL.<ul><li><code>from_sql</code> and <code>to_sql</code>: Specifies where the classes in <code>from</code> and <code>to</code> can be found for this relation, more specifically their <code>id</code>s. In our example, <code>ORDERS.customer_id</code> uniquely refers to the class <code>Customer</code>.</li></ul></li><li><code>tag</code>: Tags allow you to add additional information about a concept. For relation, we add always its cardinality, i.e. how many of <code>from</code> relate to how many of <code>to</code>. In our example, each customer can have multiple orders, but one order is assigned to one customer. This means: <code>Order</code> N--1 <code>Customer</code>, therefore <code>KB_Many2One</code>.</li></ul><p>Now, as you have seen, there are some unnecessary repetition above. Since Veezoo is based on a DRY principle (Don&#x27;t Repeat Yourself), Veezoo encourages you to hide certain properties. More specifically, </p><ul><li><code>from</code>: this is the class the relation is in</li><li><code>from_sql</code> and <code>to_sql</code>: for this relation, it is equal to the <code>idSqlPattern</code> from <code>kb.Order</code> and <code>kb.Customer</code> respectively. This would not be the case if for instance <code>kb.Customer</code> would actually have been defined in a separate table and referenced over a foreign key. In that case, the <code>to_sql</code> would be the foreign key column.</li></ul><p>Shorthand form:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation from_Customer {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            displayName.en: &quot;from&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: kb.Customer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Now we will explore the other kinds of relations with literals: <code>Double</code> or <code>Integer</code>, <code>Boolean</code>, <code>Date</code> and <code>String</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relation-class---doubleinteger"></a>Relation: Class -&gt; Double/Integer<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relation-class---doubleinteger" title="Direct link to heading">#</a></h4><p>File: <em>hitchhiker/knowledge-base/classes/Order.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation amount {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name.en: &quot;Amount&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            synonym.en: [&quot;Price&quot;, &quot;Revenue&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: Double</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            unit: onto.Unit.Currency.USD</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                to_sql: &quot;${ORDERS.amount}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Notice the <code>unit</code> parameter, which allows Veezoo to display the value in the appropriate format to the user.</p><p>Also, differently than in the previous example, here we need to explicitly define <code>to_sql</code>, since it cannot be inferred from the <code>to</code> attribute. This is the case for all literal relations, as you will see next.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relation-class---date"></a>Relation: Class -&gt; Date<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relation-class---date" title="Direct link to heading">#</a></h4><p>File: <em>hitchhiker/knowledge-base/classes/Order.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation date {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name.en: &quot;Date&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: Date</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            dateTimeFormat: DayFormat</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                to_sql: &quot;${ORDERS.date}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>For Date relations, it is required to specify the granularity by setting <code>dateTimeFormat</code>. Also, Veezoo assumes that the <code>to_sql</code> is a SQL date/datetime expression. This means that in case it is not, you should change <code>to_sql</code> to be a casting operation in your SQL dialect, e.g. <code>to_sql: &quot;TO_DATE(${ORDERS.date_str}, &#x27;YYYYMMDD&#x27;)&quot;</code> or directly in your database.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relation-class---boolean"></a>Relation: Class -&gt; Boolean<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relation-class---boolean" title="Direct link to heading">#</a></h4><p>File: <em>hitchhiker/knowledge-base/classes/Order.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation returned {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name.en: &quot;Returned&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: Boolean</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                to_sql: &quot;${ORDERS.returned} = &#x27;yes&#x27;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>For Boolean relations, the <code>to_sql</code> is any kind of SQL boolean expression.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="relation-class---string"></a>Relation: Class -&gt; String<a aria-hidden="true" tabindex="-1" class="hash-link" href="#relation-class---string" title="Direct link to heading">#</a></h4><p>In our example, we didn&#x27;t have any <code>String</code> relations, but let&#x27;s say we would have a column in our database for <code>returned_comment</code>, so whenever customers return an order, they can specify why in free-text. In this case, it is not natural to model it as a class with entities. A comment doesn&#x27;t have a name for you to refer to it in a question. But still you may want to explore its contents. </p><p>This is how we would model it in the Knowledge Graph:</p><p>File: <em>hitchhiker/knowledge-base/classes/Order.vkl</em></p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">import: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    db.postgres.movie_db.public.ORDERS</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kb {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    class Order {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        relation comment {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            name.en: &quot;Comment&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            synonym.en: [&quot;Returned Comment&quot;, &quot;Complaint&quot;, &quot;Feedback&quot;]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            to: String</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            semanticLink: {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                to_sql: &quot;${ORDERS.returned_comment}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            tag: KB_Many2One</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>That&#x27;s it. Like this, you can ask questions involving text search operations, e.g. &quot;how many customers complained about &#x27;damaged&#x27; orders last week?&quot;.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/fundamentals/kb-layer.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/db-layer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Database Layer</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#classes-and-entities" class="table-of-contents__link">Classes and Entities</a><ul><li><a href="#vkl-classes-and-entities" class="table-of-contents__link">VKL: Classes and Entities</a></li></ul></li><li><a href="#literal-types" class="table-of-contents__link">Literal Types</a></li><li><a href="#relations" class="table-of-contents__link">Relations</a><ul><li><a href="#vkl-relations" class="table-of-contents__link">VKL: Relations</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://twitter.com/veezoo" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://veezoo.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 Veezoo AG. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.cca0e727.js"></script>
<script src="/runtime~main.48bc9291.js"></script>
<script src="/main.81d16a04.js"></script>
<script src="/common.b66f2353.js"></script>
<script src="/10.838593d4.js"></script>
<script src="/11.8fd86019.js"></script>
<script src="/935f2afb.b831d62a.js"></script>
<script src="/17896441.f47bd667.js"></script>
<script src="/8a8aadd4.da239053.js"></script>
</body>
</html>